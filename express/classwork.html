<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" href="dist/css/zui.min.css"/>
		<link href="dist/lib/datagrid/zui.datagrid.min.css" rel="stylesheet">
		<script src="dist/lib/jquery/jquery.js"></script>
		<script src="dist/js/zui.min.js"></script>
		<script src="dist/lib/datagrid/zui.datagrid.min.js"></script>
	</head>
	<body>
		<div id="myDataGrid" class="datagrid">
				  <div class="datagrid-container"></div>
				  <div class="pager"></div>
		</div>
		
		<button type="button" class="btn btn-lg btn-primary" data-toggle="modal" data-target="#myModal">增加管理员</button>
		
		<div class="modal fade" id="myModal">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="panel login-main panel-primary">
		        <div class="panel-heading ">
		          <h1>增加管理员</h1>
		        </div>
		        <div class="panel-body">
		      	<div class="input-group with-padding">
		      		<span class="input-group-addon">账号：</span>
		      		<input type="text" class="form-control" placeholder="账号">
		      	</div>
		      	<div class="input-group with-padding">
		      		<span class="input-group-addon">密码：</span>
		      		<input type="text" class="form-control" placeholder="密码">
		      	</div>
		      	<div class="input-group with-padding">
		      	  <span class="input-group-addon">确认密码：</span>
		      	  <input type="text" class="form-control" placeholder="确认密码">
		      	</div>
		      	<div class="with-padding"><b class="btn btn-block btn-primary" href="index.html" >确定</a></div>
		      	<div class="with-padding"><a class="btn btn-block btn-denger" href="login.html" >取消</a></div>
		        </div>
		      </div>
		    </div>
		  </div>
		</div>
	</body>
</html>
<script>
	$('#myDataGrid').datagrid({
	    dataSource: {
	        cols:[
				{name: 'account', label: '账号', width: 132},
	            {name: 'time', label: '创建时间', width: 134},
				{name: 'state', label: '状态', width: 134},
				{
					name: 'account',
					label: '操作',
					html:true,
					// 值转换器仅仅影响当前列
					valueOperator: {
						getter: function(dataValue, cell, dataGrid) {
							//dataValue 应该就是 demo.json 中time的值
							//return 就是外面要显示的值
							let state = cell.config.data.state;
							let opt = "<button class='btn btn-sm btn-info' onclick = 'modify(\""+dataValue+"\")'>修改</button> <button class='btn btn-sm btn-danger' onclick = 'mydelete(\""+dataValue+"\")'>删除</button> <button class='btn btn-sm btn-danger' onclick = 'unenable(\""+dataValue+"\")'>禁用</button>" ;
							if(state==0){
								opt = "<button class='btn btn-sm btn-info' onclick = 'mydelete(\""+dataValue+"\")'>删除</button> <button class='btn btn-sm btn-danger' onclick = 'unenable(\""+dataValue+"\")'>禁用</button>" ;
							}else if(state==1){
								opt = "<button class='btn btn-sm btn-info' onclick = 'mydelete(\""+dataValue+"\")'>删除</button> <button class='btn btn-sm btn-danger' onclick = 'start(\""+dataValue+"\")'>启用</button>" ;
							}else{
								opt = "<button class='btn btn-sm btn-info' onclick = 'recovery(\""+dataValue+"\")'>恢复</button>" ;
							}
							return opt;
						}
					}
				}
	        ],
	        remote: function(params) {
	            return {
	                // 原创请求地址
	                url: 'json/demo1.json',
	                // 请求类型
	                type: 'GET',
	                // 数据类型
	                dataType: 'json'
	            };
	        }
	    }
	});
	
	function modify(id){
		console.log(id)
		alert(id)
	}
	function mydelete(id){
		console.log(id)
		alert(id)
		
	}
	function start(id){
		console.log(id)
		alert(id)
		
	}
	function unenable(id){
		console.log(id)
		alert(id)
		
	}
	function recovery(id){
		console.log(id)
		alert(id)
		
	}
</script>